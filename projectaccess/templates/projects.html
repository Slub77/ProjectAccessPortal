
{% extends "base.html" %}

{% block content %}

<div class="container">

    {% for project in projects %}

        <div style="border: 2px solid black">

            <div class="row">
                <div class="col-md-8"><h1>Project: {{ project.block }} - {{ project.name }}</h1></div>
                <div class="col-md-4"><h1><a href="{% url 'projectaccess:delete_project' project.id %}"/>Delete</a></h1></div>
            </div>

            <table class="table">

                <thead>
                    <tr>
                        <td>Member's LDAP name</td>
                        <td>Member's P4 user</td>
                    </tr>
                </thead>

                <tbody>

                    {% for user in project.members.all %}
                        <tr>
                            <td> {% if user.ldap_user %} {{ user.ldap_user.dn }} {% endif %} <td>
                            <td> {% if user.p4_user %} {{ user.p4_user.user }} {% endif %} <td>
                            <td>
                                <form action="{% url 'projectaccess:projects' %}" method="post">
                                    {% csrf_token %}
                                    <input type="hidden" name="action" value="remove" />
                                    <input type="hidden" name="project_id" value="{{project.id}}">
                                    <input type="hidden" name="user_id" value="{{user.id}}">
                                    <button type="submit" name="submit" class="btn btn-default">Remove</button>
                                </form>
                            </td>

                        </tr>
                    {% endfor %}

                </tbody>

            </table>

            <form action="{% url 'projectaccess:projects' %}" method="post">
                {% csrf_token %}
                <div class="form-group">
                    <label for="user_name">Add user to project</label>
                    <input type="hidden" name="action" value="add" />
                    <input type="hidden" name="project_id" value="{{project.id}}">
                    <input type="text" class="form-control" id="user_name" placeholder="Enter user LDAP uid here" name="user_name">
                    <button type="submit" class="btn btn-default">Add</button>
                </div>
            </form>

        </div>

    {% endfor %}

</div>
{% endblock %}